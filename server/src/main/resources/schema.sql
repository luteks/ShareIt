
CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  email varchar(255) NOT NULL UNIQUE,
  name varchar(64) NOT NULL
);

CREATE TABLE IF NOT EXISTS requests (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
description varchar(400) NOT NULL,
requestor_id bigint REFERENCES users (id),
created TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS items (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
name varchar(255)  NOT NULL,
description varchar(255),
is_available BOOLEAN,
owner_id bigint NOT NULL REFERENCES users (id),
request_id bigint REFERENCES requests (id)
);

CREATE TABLE IF NOT EXISTS bookings (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
at_start TIMESTAMP WITHOUT TIME ZONE NOT NULL,
at_end TIMESTAMP WITHOUT TIME ZONE NOT NULL,
item_id bigint NOT NULL REFERENCES items (id),
booker_id bigint NOT NULL references users (id),
status varchar(64) NOT NULL
);

CREATE TABLE IF NOT EXISTS comments (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
text varchar(255)  NOT NULL,
created TIMESTAMP WITHOUT TIME ZONE NOT NULL,
item_id bigint NOT NULL REFERENCES items (id),
author_id bigint NOT NULL references users (id)
);